(this["webpackJsonpbrowser-engine"]=this["webpackJsonpbrowser-engine"]||[]).push([[0],{41:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var i=n(0),s=n.n(i),r=n(20),o=n.n(r),a=(n(41),n(6)),c=n(1),h=n(2),u=n(12),l=n(30),d=n.n(l)()(u),m=function(){function e(t){Object(c.a)(this,e),this.scene=void 0,this.fov=45,this.near=.01,this.far=2e4,this.camera=void 0,this.renderer=new u.WebGLRenderer({antialias:!0}),this.container=void 0,this.controls=void 0,this.scene=t}return Object(h.a)(e,[{key:"Initialize",value:function(e){var t=this;this.renderer.setSize(e.clientWidth,e.clientHeight),this.container=e,this.container.appendChild(this.renderer.domElement),this.AddCamera(),this.AddControls(),window.addEventListener("resize",(function(){return t.HandleResize()}))}},{key:"AddCamera",value:function(){this.camera=new u.PerspectiveCamera(this.fov,window.innerWidth/window.innerHeight,this.near,this.far),this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix()}},{key:"AddControls",value:function(){this.controls=new d(this.camera,this.renderer.domElement),this.controls.autoRotate=!1,this.controls.enableDamping=!0,this.controls.dampingFactor=.39,this.camera&&(this.camera.position.z=200),this.controls.update()}},{key:"HandleResize",value:function(){this.camera&&(this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio))}},{key:"Update",value:function(){this.controls&&this.controls.update(),this.camera&&this.scene&&this.renderer.render(this.scene,this.camera)}}]),e}(),f=[],v=function(){function e(){Object(c.a)(this,e),this.scene=new u.Scene,this.cameraController=new m(this.scene),this.running=!1,this.SetupScene()}return Object(h.a)(e,[{key:"SetupScene",value:function(){}},{key:"Add",value:function(e){e.mesh?(this.scene.add(e.mesh),f.push(e)):e.group&&(this.scene.add(e.group),f.push(e))}},{key:"Update",value:function(e){this.running&&f.forEach((function(t){return!t.inGroup&&t.Update(e)})),this.cameraController.Update()}},{key:"Run",value:function(){var e,t,n=this;this.running&&this.cameraController&&this.cameraController.renderer||(null===this||void 0===this||null===(e=this.cameraController)||void 0===e||null===(t=e.renderer)||void 0===t||t.setAnimationLoop((function(e){return n.Update(e)})),this.running=!0)}},{key:"Stop",value:function(){this.running&&(this.running=!1)}},{key:"Initialize",value:function(e){this.cameraController.Initialize(e)}}]),e}(),p=function(){function e(t){Object(c.a)(this,e),this.scene=void 0,this.scene=t,this.SetupEvents()}return Object(h.a)(e,[{key:"SetupEvents",value:function(){var e=this;document.addEventListener("keydown",(function(t){32===t.keyCode&&(e.scene.running?e.scene.Stop():e.scene.Run())}))}}]),e}(),b=n(31),j=["_id","_scene","geometry","material","mesh","inGroup"],y=new v;new p(y);var O=function(){function e(t){var n,i;Object(c.a)(this,e),this._id=Object(b.v4)(),this._scene=y,this.inGroup=!1,this.material=void 0,this.geometry=void 0,this.mesh=void 0,this.inGroup=null!==(n=null===t||void 0===t||null===(i=t.entityParams)||void 0===i?void 0:i.inGroup)&&void 0!==n?n:this.inGroup,this.material=new u.MeshBasicMaterial,this.geometry=new u.BoxBufferGeometry(3,3,3),this.mesh=new u.Mesh(this.geometry,this.material),this.Awake()}return Object(h.a)(e,[{key:"Awake",value:function(){if(this.BuildMesh(),!this.mesh)throw new Error("Entity.BuildMesh() must set .mesh field");this._scene.Add(this)}},{key:"GetProps",value:function(){return Object.entries(this).filter((function(e){var t=Object(a.a)(e,2),n=t[0];t[1];return!j.some((function(e){return e===n}))}))}}]),e}(),w=n(10),g={scene:void 0},k=Object(i.createContext)(g),x=function(e){var t=e.children,n=Object(i.useMemo)((function(){return y}),[]);return Object(w.jsx)(k.Provider,{value:{scene:n},children:t})},C=n(35),z=n(36),S=function(){var e=Object(i.useContext)(k).scene,t=Object(i.useRef)();return Object(i.useEffect)((function(){null===e||void 0===e||e.Initialize(t.current),null===e||void 0===e||e.Run()}),[t,e]),{ref:t,scene:e}},M=n(11),E=n(32),_=n(25),A=n(3),G=n(4),P=function(){function e(t){var n,i,s;Object(c.a)(this,e),this.position=new u.Vector3(0,0,0),this.rotation=new u.Euler(0,0,0,"XYZ"),this.scale=new u.Vector3(1,1,1),this._mesh=void 0,console.debug("created new transform"),this.position=null!==(n=null===t||void 0===t?void 0:t.position)&&void 0!==n?n:this.position,this.rotation=null!==(i=null===t||void 0===t?void 0:t.rotation)&&void 0!==i?i:this.rotation,this.scale=null!==(s=null===t||void 0===t?void 0:t.scale)&&void 0!==s?s:this.scale}return Object(h.a)(e,[{key:"SetMesh",value:function(e){console.debug("set mesh!"),this._mesh=e}},{key:"Update",value:function(){this._mesh?(this._mesh.position.setX(this.position.x),this._mesh.position.setY(this.position.y),this._mesh.position.setZ(this.position.z),this._mesh.rotation.x=this.rotation.x,this._mesh.rotation.y=this.rotation.y):console.error("Attempting to update transform without setting mesh!")}}]),e}(),R=function(e){Object(A.a)(n,e);var t=Object(G.a)(n);function n(e){var i,s;return Object(c.a)(this,n),(s=t.call(this,e)).transform=void 0,s.speed=.03,s.transform=new P(null===e||void 0===e?void 0:e.transform),s.transform.SetMesh(s.mesh),s.speed=null!==(i=null===e||void 0===e?void 0:e.speed)&&void 0!==i?i:s.speed,s}return Object(h.a)(n,[{key:"BuildMesh",value:function(){this.geometry=new u.CylinderGeometry(0,4,8,10),this.material=new u.MeshNormalMaterial,this.mesh=new u.Mesh(this.geometry,this.material)}},{key:"Update",value:function(){this.transform.Update(),this.transform.rotation.x+=this.speed,this.transform.rotation.y+=this.speed,this.transform.rotation.z+=this.speed}}]),n}(O);function W(e){Object(E.a)(e);var t=Object(i.useState)(),n=Object(a.a)(t,2),s=n[0],r=n[1],o=Object(i.useCallback)((function(){if(!s)return{};var e,t=s.GetProps(),n={},i=Object(M.a)(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;"object"!==typeof r[1]?n[r[0]]=r[1]:console.debug(r[0],"is a component")}}catch(o){i.e(o)}finally{i.f()}return n}),[s]),c=Object(_.b)((function(){return o()}),[s]);return Object(_.b)({"New Agent":Object(_.a)((function(){r(new R)}))}),Object(i.useEffect)((function(){s&&console.debug(s.GetProps())}),[c]),Object(w.jsx)(w.Fragment,{})}function B(){var e=S(),t=e.ref,n=e.scene;return Object(w.jsxs)("main",{className:"w-screen h-screen overflow-hidden ",children:[Object(w.jsx)("nav",{className:"bg-gray-900 p-2"}),Object(w.jsxs)("section",{className:"w-full h-full grid",style:{gridTemplateColumns:"max-content 100%"},children:[Object(w.jsx)(z.a,{className:"border-r-4 border-gray-700 z-20",minWidth:"30vw",maxWidth:"70vw",onResize:function(){return null===n||void 0===n?void 0:n.cameraController.HandleResize()},children:Object(w.jsx)("div",{className:"bg-black h-full",id:"scene",ref:t})}),Object(w.jsxs)("div",{className:"h-full",children:[Object(w.jsx)(W,{}),Object(w.jsx)(C.a,{height:"100%",theme:"vs-dark",defaultLanguage:"typescript",defaultValue:"// Welcome to Browser Engine!\n// A Project by @parssak (Parssa Kyanzadeh)\n//\n// This is a simple example of a TypeScript file.\n//\n// This editor doesn't do much yet.\n"})]})]})]})}var H=function(){return Object(w.jsx)(x,{children:Object(w.jsx)(B,{})})};o.a.render(Object(w.jsx)(s.a.StrictMode,{children:Object(w.jsx)(H,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.61364276.chunk.js.map